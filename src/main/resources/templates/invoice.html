<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Invoice</title>
</head>
<body>
<h2>Create Invoice</h2>

/* todo: select2 */
<form th:action="@{/invoice/add}" method="post">
    <label for="item">Select Item:</label>
    <select id="item" name="itemId" required>
        <option value="" disabled selected> -SELECT AN ITEM- </option>
        <option th:each="item : ${items}"
                th:value="${item.id}"
                th:text="${item.model + ' - ' + item.color + ' - ' + item.storage}">
        </option>
    </select>

    <label for="quantity">Qty:</label>
    <input type="number" id="quantity" name="quantity" min="1" value="1" required>

    <button type="submit">Add to Invoice</button>
</form>

<hr>

<h3>Invoice Items</h3>
<table border="1">
    <thead>
    <tr>
        <th>Item ID</th>
        <th>Model</th>
        <th>Color</th>
        <th>Storage</th>
        <th>Price</th>
        <th>Quantity</th>
        <th>Total</th>
        <th>Actions</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="item : ${tempItems}">
        <td th:text="${item.itemId}"></td>
        <td th:text="${item.model}"></td>
        <td th:text="${item.color}"></td>
        <td th:text="${item.storage}"></td>
        <td th:text="${item.price}"></td>
        <td th:text="${item.quantity}"></td>
        <td th:text="${item.total}"></td>
        <td>
            <!-- delete Link -->
            <a th:href="@{'/invoice/delete/' + ${item.itemId}}"
               class="action-link text-danger"
               onclick="return confirm('Are you sure you want to delete this item?');">
                <i class="bi bi-trash"></i> Delete
            </a>
        </td>
    </tr>
    </tbody>
</table>

<hr>
<p><strong>Grand Total:</strong> Rs. <span th:text="${grandTotal}">0.00</span></p>


</body>
</html>
